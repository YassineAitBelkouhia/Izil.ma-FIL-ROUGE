{"remainingRequest":"C:\\Users\\adm\\Desktop\\Documents\\Fil Rouge\\Project\\IZILFINAL\\izil\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\adm\\Desktop\\Documents\\Fil Rouge\\Project\\IZILFINAL\\izil\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\adm\\Desktop\\Documents\\Fil Rouge\\Project\\IZILFINAL\\izil\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\adm\\Desktop\\Documents\\Fil Rouge\\Project\\IZILFINAL\\izil\\src\\components\\Booking.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\adm\\Desktop\\Documents\\Fil Rouge\\Project\\IZILFINAL\\izil\\src\\components\\Booking.vue","mtime":1629653011372},{"path":"C:\\Users\\adm\\Desktop\\Documents\\Fil Rouge\\Project\\IZILFINAL\\izil\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\adm\\Desktop\\Documents\\Fil Rouge\\Project\\IZILFINAL\\izil\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\adm\\Desktop\\Documents\\Fil Rouge\\Project\\IZILFINAL\\izil\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\adm\\Desktop\\Documents\\Fil Rouge\\Project\\IZILFINAL\\izil\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IExvYWRpbmcgZnJvbSAiLi4vY29tcG9uZW50cy9Mb2FkaW5nLnZ1ZSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQm9va2luZyIsCiAgY29tcG9uZW50czogewogICAgTG9hZGluZzogTG9hZGluZwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGVEYXRhOiB7CiAgICAgICAgZnJvbTogbnVsbCwKICAgICAgICB0bzogbnVsbAogICAgICB9LAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICBpc1Jlc3BvbnNlU2hvd246IGZhbHNlLAogICAgICBpc0Jvb2tpbmdCdXR0b25TaG93bjogZmFsc2UsCiAgICAgIHN0YXR1czogbnVsbCwKICAgICAgYm9va2luZ19pZDogbnVsbCwKICAgICAgYm9va2VkX3JpYWQ6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGVjazogZnVuY3Rpb24gY2hlY2soKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuaXNSZXNwb25zZVNob3duID0gdHJ1ZTsKICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDo4MDAwL2FwaS9yaWFkcy8iLmNvbmNhdCh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsICIvYXZhaWxhYmlsaXR5IiksIHRoaXMuZGF0ZURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMuc3RhdHVzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBfdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT0gMCkgewogICAgICAgICAgX3RoaXMuaXNCb29raW5nQnV0dG9uU2hvd24gPSB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYm9vazogZnVuY3Rpb24gYm9vaygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgYm9va2luZ0RhdGEgPSB7CiAgICAgICAgZnJvbTogdGhpcy5kYXRlRGF0YS5mcm9tLAogICAgICAgIHRvOiB0aGlzLmRhdGVEYXRhLnRvLAogICAgICAgIHJpYWRfaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwKICAgICAgICB1c2VyX2lkOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcklkIikKICAgICAgfTsKICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDo4MDAwL2FwaS9ib29raW5ncyIsIGJvb2tpbmdEYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi5ib29raW5nX2lkID0gcmVzcG9uc2UuZGF0YS5pZDsKICAgICAgICBfdGhpczIuYm9va2VkX3JpYWQgPSByZXNwb25zZS5kYXRhLnJpYWRfaWQ7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImJvb2tpbmdfaWQiLCBfdGhpczIuYm9va2luZ19pZCk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImJvb2tlZF9yaWFkIiwgX3RoaXMyLmJvb2tlZF9yaWFkKTsKICAgICAgICBjb25zb2xlLmxvZyhsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYm9va2luZ19pZCIpKTsKICAgICAgICBjb25zb2xlLmxvZyhsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYm9va2VkX3JpYWQiKSk7CgogICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goIi9FeHBsb3JlIik7CgogICAgICAgIF90aGlzMi5oaWRlTW9kYWwoKTsKICAgICAgfSk7CiAgICB9LAogICAgaGlkZU1vZGFsOiBmdW5jdGlvbiBoaWRlTW9kYWwoKSB7CiAgICAgIHRoaXMuJGVtaXQoImhpZGUiKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["C:\\Users\\adm\\Desktop\\Documents\\Fil Rouge\\Project\\IZILFINAL\\izil\\src\\components\\Booking.vue"],"names":[],"mappings":"AA+BA,OAAO,OAAP,MAAoB,2BAApB;AACA,OAAO,KAAP,MAAkB,OAAlB;AACA,eAAe;AACb,EAAA,IAAI,EAAE,SADO;AAEb,EAAA,UAAU,EAAE;AACV,IAAA,OAAO,EAAP;AADU,GAFC;AAKb,EAAA,IALa,kBAKN;AACL,WAAO;AACL,MAAA,QAAQ,EAAE;AACR,QAAA,IAAI,EAAE,IADE;AAER,QAAA,EAAE,EAAE;AAFI,OADL;AAKL,MAAA,SAAS,EAAE,KALN;AAML,MAAA,eAAe,EAAE,KANZ;AAOL,MAAA,oBAAoB,EAAE,KAPjB;AAQL,MAAA,MAAM,EAAE,IARH;AASL,MAAA,UAAU,EAAE,IATP;AAUL,MAAA,WAAW,EAAE;AAVR,KAAP;AAYD,GAlBY;AAmBb,EAAA,OAAO,EAAE;AACP,IAAA,KADO,mBACC;AAAA;;AACN,WAAK,SAAL,GAAiB,IAAjB;AACA,WAAK,eAAL,GAAuB,IAAvB;AACA,MAAA,KAAI,CACD,IADH,2CAEuC,KAAK,MAAL,CAAY,MAAZ,CAAmB,EAF1D,oBAGI,KAAK,QAHT,EAKG,IALH,CAKQ,UAAC,QAAD,EAAc;AAClB,QAAA,KAAI,CAAC,MAAL,GAAc,QAAQ,CAAC,IAAvB;AACA,QAAA,KAAI,CAAC,SAAL,GAAiB,KAAjB;;AACA,YAAI,QAAQ,CAAC,IAAT,IAAiB,CAArB,EAAwB;AACtB,UAAA,KAAI,CAAC,oBAAL,GAA4B,IAA5B;AACF;AACD,OAXH;AAYD,KAhBM;AAkBP,IAAA,IAlBO,kBAkBA;AAAA;;AACL,UAAI,WAAU,GAAI;AAChB,QAAA,IAAI,EAAE,KAAK,QAAL,CAAc,IADJ;AAEhB,QAAA,EAAE,EAAE,KAAK,QAAL,CAAc,EAFF;AAGhB,QAAA,OAAO,EAAE,KAAK,MAAL,CAAY,MAAZ,CAAmB,EAHZ;AAIhB,QAAA,OAAO,EAAE,YAAY,CAAC,OAAb,CAAqB,QAArB;AAJO,OAAlB;AAMA,MAAA,KAAI,CACD,IADH,CACQ,oCADR,EAC8C,WAD9C,EAEG,IAFH,CAEQ,UAAC,QAAD,EAAc;AAClB,QAAA,MAAI,CAAC,UAAL,GAAkB,QAAQ,CAAC,IAAT,CAAc,EAAhC;AACA,QAAA,MAAI,CAAC,WAAL,GAAmB,QAAQ,CAAC,IAAT,CAAc,OAAjC;AACA,QAAA,YAAY,CAAC,OAAb,CAAqB,YAArB,EAAmC,MAAI,CAAC,UAAxC;AACA,QAAA,YAAY,CAAC,OAAb,CAAqB,aAArB,EAAoC,MAAI,CAAC,WAAzC;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,YAAY,CAAC,OAAb,CAAqB,YAArB,CAAZ;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,YAAY,CAAC,OAAb,CAAqB,aAArB,CAAZ;;AACA,QAAA,MAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,UAAlB;;AAEA,QAAA,MAAI,CAAC,SAAL;AACD,OAZH;AAaD,KAtCM;AAwCP,IAAA,SAxCO,uBAwCK;AACV,WAAK,KAAL,CAAW,MAAX;AACD;AA1CM;AAnBI,CAAf","sourcesContent":["<template>\r\n  <div class=\"Booking\" @click.self=\"hideModal\">\r\n    <div class=\"modal\">\r\n      <p class=\"modalHeader\">CHECK AVAILABILITY</p>\r\n      <div class=\"formContainer\">\r\n        <div class=\"formControll\">\r\n          <label class=\"formLabel\" for=\"from\">FROM</label>\r\n          <input v-model=\"dateData.from\" type=\"date\" placeholder=\"yyyy-mm-dd\" />\r\n        </div>\r\n        <div class=\"formControll\">\r\n          <label class=\"formLabel\" for=\"from\">TO</label>\r\n          <input v-model=\"dateData.to\" type=\"date\" />\r\n        </div>\r\n      </div>\r\n      <button @click=\"check\" class=\"modalButton\" :disabled=\"isLoading\">\r\n        Check\r\n      </button>\r\n      <div class=\"resPonseArea\">\r\n        <Loading v-if=\"isLoading\" />\r\n        <p class=\"responseText\" v-if=\"!isLoading && isResponseShown\">\r\n          Riad is {{ status ? \"Not Available\" : \"Available\" }}\r\n        </p>\r\n      </div>\r\n      <button v-if=\"isBookingButtonShown\" @click=\"book\" class=\"modalButton\">\r\n        Book Now\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Loading from \"../components/Loading.vue\";\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"Booking\",\r\n  components: {\r\n    Loading,\r\n  },\r\n  data() {\r\n    return {\r\n      dateData: {\r\n        from: null,\r\n        to: null,\r\n      },\r\n      isLoading: false,\r\n      isResponseShown: false,\r\n      isBookingButtonShown: false,\r\n      status: null,\r\n      booking_id: null,\r\n      booked_riad: null,\r\n    };\r\n  },\r\n  methods: {\r\n    check() {\r\n      this.isLoading = true;\r\n      this.isResponseShown = true;\r\n      axios\r\n        .post(\r\n          `http://localhost:8000/api/riads/${this.$route.params.id}/availability`,\r\n          this.dateData\r\n        )\r\n        .then((response) => {\r\n          this.status = response.data;\r\n          this.isLoading = false;\r\n          if (response.data == 0) {\r\n            this.isBookingButtonShown = true;\r\n          }\r\n        });\r\n    },\r\n\r\n    book() {\r\n      let bookingData = {\r\n        from: this.dateData.from,\r\n        to: this.dateData.to,\r\n        riad_id: this.$route.params.id,\r\n        user_id: localStorage.getItem(\"userId\"),\r\n      };\r\n      axios\r\n        .post(\"http://localhost:8000/api/bookings\", bookingData)\r\n        .then((response) => {\r\n          this.booking_id = response.data.id;\r\n          this.booked_riad = response.data.riad_id;\r\n          localStorage.setItem(\"booking_id\", this.booking_id);\r\n          localStorage.setItem(\"booked_riad\", this.booked_riad);\r\n          console.log(localStorage.getItem(\"booking_id\"));\r\n          console.log(localStorage.getItem(\"booked_riad\"));\r\n          this.$router.push(\"/Explore\");\r\n\r\n          this.hideModal();\r\n        });\r\n    },\r\n\r\n    hideModal() {\r\n      this.$emit(\"hide\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style  scoped>\r\n.Booking {\r\n  top: 0;\r\n  left: 0;\r\n  position: fixed;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: #996415ed;\r\n  width: 100%;\r\n  height: 100vh;\r\n}\r\n.modal {\r\n  width: 500px;\r\n  padding: 40px;\r\n  margin: auto;\r\n  background: rgb(32, 32, 32);\r\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n}\r\n\r\n.formContainer {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  margin: 30px 0;\r\n}\r\n\r\n.formControll {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n}\r\n\r\n.modalHeader {\r\n  font-family: luxia;\r\n  font-size: 18px;\r\n  color: #996515;\r\n}\r\n\r\n.formLabel {\r\n  font-family: luxia;\r\n  font-size: 20px;\r\n  color: #996515;\r\n}\r\n\r\ninput {\r\n  padding: 10px 0;\r\n  background: transparent;\r\n  border: none;\r\n  border-bottom: 2px solid #996515;\r\n  outline: none;\r\n  width: 100%;\r\n  font-family: luxia;\r\n  font-size: 15px;\r\n  color: #996515;\r\n}\r\n\r\n.modalButton {\r\n  font-family: luxia;\r\n  margin-top: 20px;\r\n  color: #996515;\r\n  cursor: pointer;\r\n  width: 100%;\r\n  background: rgb(29, 29, 29);\r\n  border: 0;\r\n  border-radius: 5px;\r\n  font-size: 22px;\r\n  padding: 10px 30px;\r\n  text-decoration: none;\r\n}\r\n\r\n.modalButton:focus {\r\n  outline: 0;\r\n}\r\n\r\n.modalButton:active {\r\n  transform: scale(0.99);\r\n}\r\n\r\n.resPonseArea {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.responseText {\r\n  font-family: luxia;\r\n  font-size: 20px;\r\n  color: gray;\r\n  margin-top: 30px;\r\n}\r\n</style>"],"sourceRoot":""}]}